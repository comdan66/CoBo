"use strict";function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_unsupportedIterableToArray(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function _iterableToArrayLimit(a,b){var c=a&&("undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"]);if(null!=c){var d,e,f=[],g=!0,h=!1;try{for(c=c.call(a);!(g=(d=c.next()).done)&&(f.push(d.value),!(b&&f.length===b));g=!0);}catch(a){h=!0,e=a}finally{try{g||null==c["return"]||c["return"]()}finally{if(h)throw e}}return f}}function _arrayWithHoles(a){if(Array.isArray(a))return a}/**
 * @author      OA Wu <comdan66@gmail.com>
 * @copyright   Copyright (c) 2015 - 2021, Lalilo
 * @license     http://opensource.org/licenses/MIT  MIT License
 * @link        https://www.ioa.tw/
 */Vue.component("index-form",{props:{id:{type:Number,default:0,required:!0},focus:{type:Boolean,default:!1,required:!0}},data:function data(){return{popupBox:null,messages:[],maybes:[],model:null}},mounted:function mounted(){var a=this;API.GET("spend/maybe").auth().done(function(b){return a.maybes=b}).send();var b={title:"",money:0,memo:"",timeAt:{date:{_:date("Y-m-d"),get str(){var a=_slicedToArray(this.units,3),b=a[0],c=a[1],e=a[2];return b+"\u5E74"+c+"\u6708"+e+"\u65E5"},set val(a){return this._=Array.isArray(a)?a.map(function(a){return pad0(a,2)}).join("-"):a},get units(){return this._.split("-").map(function(a){return parseInt(a,10)})},get obj(){var a=_slicedToArray(this.units,3),b=a[0],c=a[1],d=a[2];return{year:b,month:c,day:d}},toString:function toString(){return this._}},time:{_:date("H:i:s"),get str(){var a=_slicedToArray(this.units,1),b=a[0];return(12==b?"\u4E2D\u5348":0==b?"\u5348\u591C":12>b?"\u4E0A\u5348":"\u4E0B\u5348")+" "+this._},set val(a){return this._=Array.isArray(a)?a.map(function(a){return pad0(a,2)}).join(":"):a},get units(){return this._.split(":").map(function(a){return parseInt(a,10)})},get obj(){var a=_slicedToArray(this.units,3),b=a[0],c=a[1],d=a[2];return{hour:b,min:c,sec:d}},toString:function toString(){return this._}},toString:function toString(){return this.date+" "+this.time}}};this.id?API.GET("spend/"+this.id).auth().fail(this.failure).done(function(c){var d=c.id,e=c.title,f=c.money,g=c.memo,h=c.timeAt;b.title=e,b.money=f,b.memo=g,b.timeAt.date.val=h.date,b.timeAt.time.val=h.time,a.model=b}).send():this.model=b,this.focus&&setTimeout(function(){return a.$refs.focus.focus()},300)},methods:{calculator:function calculator(){var a=this;return this.popupBox=PopupBox("calculator",{value:this.model.money,update:function update(b){return a.popupBox.dismiss(function(){return a.model.money=b})}}).present()},pickdate:function pickdate(){var a=this;return this.popupBox=PopupBox("pickdate",{value:this.model.timeAt.date.obj,update:function update(b,c){var d=c.year,e=c.month,f=c.day;return a.popupBox.dismiss(function(){return a.model.timeAt.date.val=[d,e,f]})}}).present()},picktime:function picktime(){var a=this;return this.popupBox=PopupBox("picktime",{value:this.model.timeAt.time.obj,update:function update(b,c){var d=c.hour,e=c.min,f=c.sec;return a.popupBox.dismiss(function(){return a.model.timeAt.time.val=[d,e,f]})}}).present()},failure:function failure(a){return this.messages=a.length?[{type:"failure",contents:a}]:[]},submit:function submit(){var a=this,b=[];if(this.model.title||b.push("\u8ACB\u586B\u5BEB\u6A19\u984C\uFF01"),0<=this.model.money||b.push("\u8ACB\u586B\u5BEB\u91D1\u984D\uFF01"),!this.failure(b).length){var c=_objectSpread(_objectSpread({},this.model),{},{timeAt:this.model.timeAt.toString()});Alert().loading("\u8ACB\u7A0D\u5019\u2026").present(function(b){return(a.id?API.PUT("spend/"+a.id,c):API.POST("spend",c)).auth().fail(a.failure).done(function(b){return a.$emit("done",b)}).after(function(){return b.dismiss()}).send()})}}},watch:{focus:function focus(){this.$refs.focus.focus()}},template:El.render("\n    form._form.form => @submit.prevent=submit\n\n      template => *if=maybes.length\n        span.maybeT => *text='\u6B77\u53F2\u7D00\u9304'\n        div.maybes\n          label => *for=({ title, money }, i) in maybes   :key=i   *text=title   @click=model.title = title, model.money = money\n\n      form-messages => :messages=messages\n\n      template => *if=model\n\n        label.title => :text='\u6A19\u984C'\n          input => type=text   :placeholder=\"\u8ACB\u8F38\u5165\u60A8\u7684\u6A19\u984C\u2026\"   *model.trim=model.title   :required=true   ref=focus\n\n        label.money._pointer => :text='\u82B1\u8CBB'   *text=model.money   @click=calculator\n\n        div.datetime => :text='\u6642\u9593'\n          div\n            label.date._pointer._center => *text=model.timeAt.date.str   @click=pickdate\n            label.time._pointer._center => *text=model.timeAt.time.str   @click=picktime\n\n        label._unit.__optional => :before='\u5099\u8A3B'\n          input._input => type=text   :placeholder=\"\u8ACB\u8F38\u5165\u5099\u8A3B\u2026\"   *model.trim=model.memo   :required=false\n\n        button._pointer._button => *text='\u78BA\u5B9A'\n\n        popup-box => :bind=popupBox\n          template => :slot:pickdate={ body }\n            calendar => @click=(day, inMonth) => body.update(body, day, inMonth)   :value=body.value\n\n          template => :slot:picktime={ body }\n            timepick => @click=time => body.update(body, time)   :value=body.value\n\n          template => :slot:calculator={ body }\n            calculator => @click=body.update   :value=body.value\n  ")});