"use strict";/**
 * @author      OA Wu <comdan66@gmail.com>
 * @copyright   Copyright (c) 2015 - 2021, Lalilo
 * @license     http://opensource.org/licenses/MIT  MIT License
 * @link        https://www.ioa.tw/
 */Vue.component("group-crud-index",{props:{groups:{type:Array,default:[],required:!0}},template:El.render("\n    div._tableview.__group\n      label._item._pointer.__arrow => *for=group in groups   :key=group.id   *text=group.title   @click=$emit('click', groups, group)\n  ")}),Vue.component("group-crud-form",{props:{group:{type:Object,default:null,required:!0}},data:function data(){return{messages:[],model:{title:""}}},mounted:function mounted(){this.model.title=this.group&&this.group.title},methods:{failure:function failure(a){return this.messages=a.length?[{type:"failure",contents:a}]:[]},submit:function submit(){var a=this,b=[];this.model.title||b.push("\u8ACB\u586B\u5BEB\u6A19\u984C\uFF01"),this.failure(b).length||Alert().loading("\u8ACB\u7A0D\u5019\u2026").present(function(b){return(a.group?API.PUT("group/"+a.group.id,a.model):API.POST("group",a.model)).auth().done(function(b){return a.$emit("done",b,a.group&&(a.group.title=a.model.title))}).fail(a.failure).after(function(){return b.dismiss()}).send()})}},template:El.render("\n    form._form => @submit.prevent=submit\n      form-messages => :messages=messages\n\n      label._unit => :before='\u6A19\u984C'\n        input._input => type=text   :placeholder=\"\u8ACB\u8F38\u5165\u5206\u985E\u6A19\u984C\u2026\"   *model.trim=model.title   :required=true\n\n      button._pointer._button => *text='\u78BA\u5B9A\u4FEE\u6539'\n  ")}),Vue.component("group-crud-delete",{props:{groups:{type:Array,default:[],required:!0},group:{type:Object,default:{title:""},required:!0}},data:function data(){return{messages:[],index:null,goal:null,goals:null}},mounted:function mounted(){var a=this;this.goals=this.groups.filter(function(b){return b!=a.group}),this.index=0==this.goals.length?0:null},methods:{failure:function failure(a){return this.messages=a.length?[{type:"failure",contents:a}]:[]},choice:function choice(){return this.$emit("choice",this)},submit:function submit(){var a=this,b=[];null===this.index&&b.push("\u8ACB\u9078\u64C7\u522A\u9664\u5F8C\uFF0C\u8A72\u5206\u985E\u4E0B\u7684\u54C1\u9805\u7684\u8655\u7F6E\uFF01"),1==this.index&&null===this.goal&&b.push("\u8ACB\u9078\u64C7\u66FF\u4EE3\u5206\u985E\uFF01"),this.failure(b).length||Alert("\u78BA\u5B9A\u522A\u9664\uFF1F").button("\u78BA\u5B9A",function(b){return API.DELETE("group/"+a.group.id,{groupId:a.goal?a.goal.id:0}).auth().fail(a.failure).done(function(){return a.$emit("done",a.groups,a.groups.indexOf(a.group))}).after(function(){return b.dismiss()}).send()}).button("\u53D6\u6D88",function(a){return a.dismiss()}).present()}},template:El.render("\n    div.group-crud-delete => *if=goals\n      form-messages => :messages=messages\n\n      div._tableview.__group => header=\u8ACB\u9078\u64C7\u8A72\u5206\u985E\u522A\u9664\u5F8C\u5176\u6240\u5C6C\u7684\u54C1\u9805\u52D5\u4F5C\n        label._item._pointer.__radio => *text='\u7686\u8A2D\u5B9A\u70BA\u672A\u5206\u985E'   :class={ active: index === 0 }   @click=index=0\n        label._item._pointer.__radio => *if=goals.length   *text='\u6539\u8A2D\u6210\u5176\u4ED6\u5206\u985E'   :class={ active: index === 1 }   @click=index=1\n\n      div._tableview.__group => *if=index === 1 && goals.length\n        label._item._pointer.__arrow => *if=goal   *text=goal.title   @click=choice\n        label._item._pointer.__arrow.item-empty => *else   *text='\u8ACB\u9078\u64C7\u5206\u985E\u2026'   @click=choice\n\n      div._tableview.__group => *if=index === 0 || (index === 1 && goal)\n        label._item._center.__pointer._t_red => *text='\u522A\u9664\u5206\u985E'   @click=submit\n  ")}),Vue.component("group-crud-choice",{props:{model:{type:Object,default:null,required:!0}},template:El.render("\n    div._tableview.__group\n      label._item._pointer.__radio => *for=goal in model.goals   :key=goal.id   *text=goal.title   :class={ active: model.goal == goal }   @click=$emit('click', model.goal = goal)\n  ")});