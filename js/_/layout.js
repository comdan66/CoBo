"use strict";/**
 * @author      OA Wu <comdan66@gmail.com>
 * @copyright   Copyright (c) 2015 - 2021, Lalilo
 * @license     http://opensource.org/licenses/MIT  MIT License
 * @link        https://www.ioa.tw/
 */Vue.component("layout",{props:{page:Object},data:function data(){return{toastrs:Toastr.items,badge:{spend:0,notify:0,setting:0,friend:0}}},mounted:function mounted(){var a=this;return Flash.messages.map(function(a){return Toastr.push(a)}),!1===this.page.auth?void 0:Auth.user?void(this.page.badge=function(b,c){return void 0===a.badge[b]||(a.badge[b]=c)},API.GET("notify/num").auth().done(function(b){var c=b.num;return a.badge.notify=c}).send()):Auth.logout(Page.changeTo(Auth.uri))},methods:{},computed:{hasNav:function hasNav(){return this.$slots.nav&&this.$slots.nav.length}},template:El.render("\n    main#app => :class={ footer: true, noTop: page.auth === false }\n      template => *if=page.auth !== false\n\n        header#header => *if=!hasNav\n          img => src=''\n          div\n            h1 => *text=''\n            span => *text=''\n        \n        nav#nav => *else\n          slot => name=nav\n\n      slot\n\n      footer#footer => *if=Auth.user   t=4\n        button.spend._icon_b => @click=Page.redirectTo('/index' + EXT)   :class={ active: page.identifier === 'spend' }\n          i => *if=badge.spend   *text=badge.spend\n          span => *text='\u958B\u92B7'\n        button.notify._icon_b => @click=Page.redirectTo('/notify' + EXT)   :class={ active: page.identifier === 'notify' }\n          i => *if=badge.notify   *text=badge.notify\n          span => *text='\u901A\u77E5'\n        button.friend._icon_b => @click=Page.redirectTo('/friend' + EXT)   :class={ active: page.identifier === 'friend' }\n          i => *if=badge.friend   *text=badge.notify\n          span => *text='\u670B\u53CB'\n        button.setting._icon_b => @click=Page.redirectTo('/setting' + EXT)   :class={ active: page.identifier === 'setting' }\n          i => *if=badge.setting   *text=badge.setting\n          span => *text='\u8A2D\u5B9A'\n\n      div#toastr => *if=toastrs.length\n        div._icon_b.toastr => *for=(item, i) in toastrs   :key=item._id   :class={ appear: item._appear, disappear: item._disappear }   :type=item.type   @click=Toastr.close(item)\n          b => *if=item.title   *text=item.title\n          span => *if=item.content   *text=item.content\n")});