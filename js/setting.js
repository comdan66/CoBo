"use strict";/**
 * @author      OA Wu <comdan66@gmail.com>
 * @copyright   Copyright (c) 2015 - 2021, Lalilo
 * @license     http://opensource.org/licenses/MIT  MIT License
 * @link        https://www.ioa.tw/
 */Load.init({data:{identifier:"setting",navPanel:null,groups:[]},mounted:function mounted(){this.init()},methods:{init:function init(){var a=this,b={text:"\u7BA1\u7406\u5206\u985E",show:!1,click:function click(){}},c={text:"\u7BA1\u7406\u958B\u92B7\u9805\u76EE",show:!1,click:function click(){}};this.groups=[{header:"\u500B\u4EBA\u8CC7\u6599",items:[{text:"\u66F4\u63DB\u66B1\u7A31",show:!1,click:function click(){}},{text:"\u8B8A\u66F4\u982D\u50CF",show:!0,click:this.avatar},{text:"\u66F4\u63DB\u5BC6\u78BC",show:!0,click:this.password}]},{header:"\u958B\u92B7\u8CC7\u6599",items:[b,c]}],API.GET("group").auth().done(function(c){b.click=function(){return a.presentGroupCRUD(c)},b.memo=c.length+"\u500B",b.show=!0}).send(),API.GET("product").auth().done(function(b){c.click=function(){return a.presentProductCRUD(b)},c.memo=b.length+"\u500B",c.show=!0}).send()},logout:function logout(){return Alert("\u78BA\u5B9A\u767B\u51FA\uFF1F","\u60A8\u78BA\u5B9A\u8981\u767B\u51FA\u7CFB\u7D71\u55CE\uFF1F").button("\u78BA\u5B9A",function(a){return Auth.logout(function(){return Page.changeTo("/login"+EXT)},a.loading("\u767B\u51FA\u4E2D\uFF0C\u8ACB\u7A0D\u5019\u2026"))}).button("\u53D6\u6D88",function(a){return a.dismiss()}).present()},password:function password(){var a=this;return this.navPanel=NavPanel(NavView("password","\u4FEE\u6539\u5BC6\u78BC").body({done:function done(){return a.navPanel.dismiss(function(){return Toastr.success("\u4FEE\u6539\u5B8C\u6210")})}})).present()},avatar:function avatar(){var a=this;return this.navPanel=NavPanel(NavView("avatar","\u4FEE\u6539\u982D\u50CF").body({done:function done(){return a.navPanel.dismiss(function(){return Toastr.success("\u4FEE\u6539\u5B8C\u6210")})}})).present()},presentGroupCRUD:function presentGroupCRUD(a){var b=this;return this.navPanel=NavPanel(NavView("group-crud-index","\u7BA1\u7406\u5206\u985E").right("\u95DC\u9589",function(a){return a.dismiss(function(){return b.init()})}).left("\u65B0\u589E",function(b){return b.push(NavView("group-crud-form","\u65B0\u589E\u5206\u985E").body({done:function done(c){return b.pop(function(){return Toastr.success("\u65B0\u589E\u6210\u529F",a.unshift(c))})}}))}).body({groups:a,show:function show(a,c){return b.navPanel.push(NavView("group-crud-form","\u4FEE\u6539\u5206\u985E").right("\u522A\u9664",function(b){return 1<a.length?b.push(NavView("group-crud-delete","\u522A\u9664\u5206\u985E").body({groups:a,group:c,choice:function choice(a){return b.push(NavView("group-crud-choice","\u9078\u64C7\u5C07\u66FF\u4EE3\u5206\u985E").body({model:a,click:function click(){return b.pop()}}))},done:function done(a,c){return b.popRoot(function(){return-1==c||a.splice(c,1),Toastr.success("\u522A\u9664\u6210\u529F")})}})):Alert("\u78BA\u5B9A\u522A\u9664\uFF1F").button("\u78BA\u5B9A",function(d){return API.DELETE("group/"+c.id).auth().fail(function(a){return Toastr.failure(a)}).done(function(){return b.popRoot(function(b){return b=a.indexOf(c),-1==b||a.splice(b,1),Toastr.success("\u522A\u9664\u6210\u529F")})}).after(function(){return d.dismiss()}).send()}).button("\u53D6\u6D88",function(a){return a.dismiss()}).present()},"_t_red").body({group:c,done:function done(){return b.navPanel.pop(Toastr.success("\u4FEE\u6539\u6210\u529F"))}}))}})).present()},presentProductCRUD:function presentProductCRUD(a){var b=this;return this.navPanel=NavPanel(NavView("product-crud-index","\u7BA1\u7406\u958B\u92B7\u9805\u76EE").body({products:a,show:function show(a,c){return b.navPanel.push(NavView("product-crud-show","\u8A2D\u5B9A\u958B\u92B7\u9805\u76EE").loading("\u53D6\u5F97\u8CC7\u6599\u4E2D\uFF0C\u8ACB\u7A0D\u5019\u2026"),function(b,d){return API.GET("product/"+c.id).auth().fail(function(a){return b.pop(function(){return Toastr.failure(a)})}).done(function(e){return d.body({products:a,product:e,choice:function choice(a,d){return b.push(NavView("product-crud-group","\u9078\u64C7\u5206\u985E").body({groups:a,product:d,productItem:c,choice:function choice(){return b.pop(function(){return Toastr.success("\u8A2D\u5B9A\u6210\u529F")})}}))}}).loading(!1)}).send()})}})).present()}},template:El.render("\n    layout => :page=this\n\n      span.title => :slot='nav'   *text='\u500B\u4EBA\u8A2D\u5B9A'\n\n      div._tableview.__group => *for=(group, i) in groups   :key=i   :header=group.header\n        label.menu._item_kv._pointer.__arrow => *for=(item, j) in group.items   :key=j   *if=item.show   @click=item.click()\n          span._key => *text=item.text\n          span._val => *if=item.memo   *text=item.memo\n\n      div._tableview.__group\n        label._item._pointer._center.__link => *text='\u767B\u51FA'   @click=logout\n\n      nav-panel => :bind=navPanel\n\n        template => :slot:group-crud-index={ body }\n          group-crud-index => :groups=body.groups   @click=body.show\n          \n        template => :slot:group-crud-form={ body }\n          group-crud-form => :group=body.group   @done=body.done\n\n        template => :slot:group-crud-delete={ body }\n          group-crud-delete => :groups=body.groups   :group=body.group   @choice=body.choice   @done=body.done\n\n        template => :slot:group-crud-choice={ body }\n          group-crud-choice => :model=body.model   @click=body.click\n\n        template => :slot:avatar={ body }\n          avatar => @done=body.done\n\n        template => :slot:password={ body }\n          password => @done=body.done\n\n        template => :slot:product-crud-index={ body }\n          product-crud-index => :products=body.products   @show=body.show\n\n        template => :slot:product-crud-show={ body }\n          product-crud-show => :products=body.products   :product=body.product   @choice=body.choice\n\n        template => :slot:product-crud-group={ body }\n          product-crud-group => :groups=body.groups   :product=body.product   :productItem=body.productItem   @choice=body.choice\n")});